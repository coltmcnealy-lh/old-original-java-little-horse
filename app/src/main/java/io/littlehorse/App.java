/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package io.littlehorse;

import com.fasterxml.jackson.dataformat.avro.AvroMapper;
import com.fasterxml.jackson.dataformat.avro.AvroSchema;
import com.fasterxml.jackson.dataformat.avro.schema.AvroSchemaGenerator;

class Foo {
    public int bar;
}

public class App {

    private static void experiment() throws Exception {
        AvroSchemaGenerator gen = new AvroSchemaGenerator();
        AvroMapper mapper = new AvroMapper();
        mapper.acceptJsonFormatVisitor(Foo.class, gen);

        AvroSchema schema = gen.getGeneratedSchema();

        String data = "{\"bar\": 5432}";
        Foo f = mapper.readerFor(Foo.class).with(schema).readValue(data.getBytes());
        System.out.println(f);
        System.out.println(f.bar);
    }

    public static void doMain(String[] args) throws Exception {

    }

    public static void main(String[] args) throws Exception {
        experiment();
    }
}
